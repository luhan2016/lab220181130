working version with dead node, but the cm parts have problem
